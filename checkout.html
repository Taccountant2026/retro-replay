<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout | Retro Replay</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

  <header class="site-header">
    <div class="header-top">
      <div class="container">
        <div class="header-promo"><span>ðŸ›’ Secure Checkout</span></div>
      </div>
    </div>

    <div class="header-main">
      <div class="container header-content">
        <a href="index.html" class="site-logo">
          <img src="assets/logo.png" alt="Retro Replay">
          <span>Retro Replay</span>
        </a>
        <div style="flex: 1;"></div>
        <div class="header-actions">
          <a href="/contact.html" class="header-action"><span>ðŸ“ž</span><span>Support</span></a>
          <a href="/checkout.html" class="header-action" style="color: var(--primary);">
            <span>ðŸ›’</span>
            <span>Cart</span>
            <span class="cart-badge" id="cart-count-js">0</span>
          </a>
        </div>
      </div>
    </div>

    <nav class="main-nav">
      <div class="container">
        <ul class="nav-list">
    
          <li><a href="/index.html">Main Home</a></li>
    
          <li><a href="/atari/index.html">Atari</a></li>
          <li><a href="/nintendo/index.html">Nintendo</a></li>
          <li><a href="/playstation/index.html">PlayStation</a></li>
          <li><a href="/sega/index.html">Sega</a></li>
          <li><a href="/xbox/index.html">Xbox</a></li>
    
          <li><a href="/services.html">Services</a></li>
          <li><a href="/warranties.html">Warranty</a></li>
          <li><a href="/faq.html">FAQ</a></li>
          <li><a href="/contact.html">Contact</a></li>
    
        </ul>
      </div>
    </nav>
  </header>

  <section class="section">
    <div class="container" style="max-width: 900px;">
      <div class="section-header">
        <h2 class="section-title">Your Shopping Cart</h2>
      </div>

      <div id="cart-items-js" style="margin-bottom: 2rem;">
        <!-- Cart items rendered here -->
      </div>

      <div style="background: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-top: 2px solid var(--gray-lighter);">
          <div style="font-size: 1.25rem; font-weight: 700; color: var(--dark);">Total:</div>
          <div style="font-size: 2rem; font-weight: 800; color: var(--primary);">Â£<span id="cart-subtotal-js">0.00</span></div>
        </div>
      </div>

      <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="index.html" class="btn btn-outline" style="flex: 1; text-align: center;">Continue Shopping</a>
        <button onclick="handleCheckout()" class="btn btn-success" style="flex: 1;">Proceed to Payment</button>
      </div>

      <div style="background: #f0f4f8; padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
        <h3 style="color: var(--primary); margin-top: 0;">Checkout Information</h3>
        <ul style="list-style: none; padding: 0; color: var(--gray);">
          <li>âœ“ All items include 6-month warranty</li>
          <li>âœ“ Fast, tracked shipping to UK & International</li>
          <li>âœ“ Secure payment processing</li>
          <li>âœ“ 30-day returns for peace of mind</li>
        </ul>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Checkout</h3>
          <p>Safe and secure online shopping.</p>
        </div>
        <div class="footer-section">
          <h3>Support</h3>
          <ul class="footer-links">
            <li><a href="/contact.html">Contact Us</a></li>
            <li><a href="/faq.html">FAQ</a></li>
            <li><a href="/warranties.html">Warranty</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Retro Replay. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="cart.js"></script>
  <script src="particles.js"></script>
  <script>
    function updateSubtotal() {
      const subtotalEl = document.getElementById('cart-subtotal-js');
      if(subtotalEl) {
        const cart = RetroCart.getCart();
        let subtotal = cart.reduce((sum,item)=>sum+item.price*item.qty,0);
        subtotalEl.textContent = subtotal.toFixed(2);
      }
    }

    function renderCheckout() {
      RetroCart.loadCart();
      const container = document.getElementById('cart-items-js');
      const cart = RetroCart.getCart();
      
      if(cart.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 2rem; background: #f9fafb; border-radius: 12px; color: var(--gray);">Your cart is empty. <a href="index.html" style="color: var(--primary); font-weight: 600;">Continue shopping</a></div>';
        updateSubtotal();
        return;
      }
      
      container.innerHTML = '';
      cart.forEach(item => {
        const div = document.createElement('div');
        div.className = 'product-card';
        div.style.cssText = 'display: flex; gap: 1.5rem; align-items: stretch; background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--gray-lighter); margin-bottom: 1rem;';
        div.innerHTML = `
          <div style="flex-shrink: 0;">
            <img src="${item.image}" alt="${item.name}" style="width: 140px; height: 140px; object-fit: cover; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
          </div>
          <div style="flex: 1; display: flex; flex-direction: column; justify-content: space-between;">
            <div>
              <h3 style="margin: 0 0 0.5rem 0; font-size: 1.25rem; font-weight: 600; color: var(--dark);">${item.name}</h3>
              <div style="display: flex; align-items: baseline; gap: 1rem; margin-bottom: 1rem;">
                <span style="font-size: 1rem; color: var(--gray);">Unit Price:</span>
                <span style="font-size: 1rem; font-weight: 600; color: var(--dark);">Â£${item.price.toFixed(2)}</span>
              </div>
            </div>
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="font-size: 0.9rem; color: var(--gray); font-weight: 500;">Quantity:</span>
                <div style="display: flex; align-items: center; gap: 0.5rem; background: #f3f4f6; border-radius: 6px; padding: 0.25rem;">
                  <button class="btn" style="padding: 0.5rem 0.75rem; background: transparent; border: none; color: var(--primary); font-weight: 700; cursor: pointer; font-size: 1.1rem;" data-action="qty-minus" data-id="${item.id}">âˆ’</button>
                  <span style="min-width: 40px; text-align: center; font-weight: 600; color: var(--dark);">${item.qty}</span>
                  <button class="btn" style="padding: 0.5rem 0.75rem; background: transparent; border: none; color: var(--primary); font-weight: 700; cursor: pointer; font-size: 1.1rem;" data-action="qty-plus" data-id="${item.id}">+</button>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 2rem;">
                <div style="text-align: right;">
                  <div style="font-size: 0.875rem; color: var(--gray); margin-bottom: 0.25rem;">Subtotal</div>
                  <div style="font-size: 1.5rem; font-weight: 800; color: var(--primary);">Â£${(item.price * item.qty).toFixed(2)}</div>
                </div>
                <button class="btn btn-outline" style="padding: 0.6rem 1.2rem; font-size: 0.9rem; white-space: nowrap;" data-action="remove" data-id="${item.id}">Remove</button>
              </div>
            </div>
          </div>
        `;
        container.appendChild(div);
      });
      
      document.querySelectorAll('[data-action="qty-minus"]').forEach(btn => {
        btn.addEventListener('click', () => {
          updateQty(btn.dataset.id, -1);
        });
      });
      document.querySelectorAll('[data-action="qty-plus"]').forEach(btn => {
        btn.addEventListener('click', () => {
          updateQty(btn.dataset.id, 1);
        });
      });
      document.querySelectorAll('[data-action="remove"]').forEach(btn => {
        btn.addEventListener('click', () => {
          RetroCart.removeItem(btn.dataset.id);
          renderCheckout();
        });
      });
      
      updateSubtotal();
    }

    function updateQty(id, delta) {
      const cart = RetroCart.getCart();
      const item = cart.find(i => i.id === id);
      if(item) {
        item.qty = Math.max(1, item.qty + delta);
        localStorage.setItem('retroCart', JSON.stringify(cart));
        renderCheckout();
      }
    }

    function handleCheckout() {
      const cart = RetroCart.getCart();
      if(cart.length === 0) {
        alert('Your cart is empty');
        return;
      }
      alert('Thank you for your order! In a real application, you would be redirected to payment processing.');
    }

    document.addEventListener('DOMContentLoaded', renderCheckout);
  </script>
</body>
</html>
