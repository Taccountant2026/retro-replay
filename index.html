<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Retro Replay — Classic Gaming</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="assets/logo.png" type="image/x-icon">
<style>
:root{
  --bg:#f7f8fa;
  --panel:#ffffff;
  --muted:#333333;
  --accent:#4a90e2;
  --panel-2:#e4e7ed;
  --card-border:#4a90e2;
}
html,body{height:100%}
body{
  font-family:'Orbitron',sans-serif;
  background:var(--bg);
  color:var(--muted);
  margin:0; padding:0;
}
.wrap{ max-width:1200px; margin:0 auto; padding:2rem; }
header{
  display:flex; justify-content:space-between; align-items:center;
  flex-wrap: wrap; margin-bottom:2rem;
}
.logo{ height:80px; width:auto; }
nav{ display:flex; flex-wrap:wrap; gap:1rem; }
nav a{ color:var(--muted); text-decoration:none; font-weight:bold; }
nav a:hover, nav a.active{ color:var(--accent); text-decoration:underline; }

.hero{
  text-align:center;
  margin-bottom:2rem;
}
.hero img.logo{ max-width:180px; margin-bottom:1rem; }
.hero h1{ font-size:2rem; color:var(--muted); margin-bottom:0.5rem; }
.hero p{ font-size:1.1rem; color:#555; }

.section-title{ font-size:1.8rem; color:var(--accent); margin-bottom:1rem; text-align:center; }

.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1.5rem;
  margin-bottom:2rem;
}
.product-card{
  background:var(--panel);
  padding:1rem;
  border-radius:8px;
  text-align:center;
  display:flex; flex-direction:column;
  border:1px solid rgba(0,0,0,0.05);
}
.product-card img{ max-width:100%; margin-bottom:0.5rem; border-radius:4px; }
.product-card .name{ font-weight:600; margin-bottom:0.3rem; color:var(--muted); }
.product-card .price{ font-size:1.2rem; font-weight:bold; margin-bottom:0.5rem; color:var(--accent); }
.product-card p{ font-size:0.95rem; line-height:1.4; color:#666; }
.product-actions{
  margin-top:auto;
  display:flex; justify-content:center; gap:8px; align-items:center; padding-top:10px;
}
.btn{
  display:inline-block;
  background:var(--accent);
  color:#fff;
  padding:0.6rem 0.9rem;
  border-radius:8px;
  text-decoration:none;
  font-weight:bold;
  border:none;
  cursor:pointer;
}
.btn.alt{ background:transparent; color:var(--accent); border:1px solid var(--accent); }
.btn.small{ padding:0.4rem 0.6rem; font-size:0.95rem; }

/* Upgrade modal styles */
.modal{
  position:fixed; top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,0.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:20px;
}
.modal.active{ display:flex; }
.modal-panel{
  width:100%; max-width:600px;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
.modal-panel h3{ color:var(--accent); margin-top:0; }
.upgrade-list{ display:flex; flex-direction:column; gap:10px; margin:10px 0 18px; }
.upgrade-item{ display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:8px; background: rgba(0,0,0,0.03); }
.upgrade-item label{ cursor:pointer; }
.upgrade-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:10px; }
</style>
</head>
<body>

<div class="wrap">

<header>
  <img src="assets/logo.png" alt="Retro Replay Logo" class="logo">
  <nav>
    <a href="index.html" class="active">Home</a>
    <a href="products.html">Products</a>
    <a href="mods-upgrades.html">Mods & Upgrades</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<section class="hero">
  <img src="assets/logo.png" alt="Retro Replay Logo" class="logo">
  <h1>Retro Gaming, Refined</h1>
  <p>Refurbished PlayStation 2 consoles, curated bundles, and classic gaming accessories.</p>
</section>

<section class="products">
  <h2 class="section-title">Our Products</h2>
  <div class="product-grid">
    <!-- Product Cards -->
    <div class="product-card" data-base="150" data-name="Refurbished PS2 Fat">
      <img src="assets/PS2_REFURBED_BUNDLE.jpg" alt="Refurbished PS2 Fat">
      <div class="name">Refurbished PS2 Fat</div>
      <div class="price">£150</div>
      <p>Fully refurbished PS2 Fat console, cleaned, tested, cosmetically restored.</p>
      <div class="product-actions">
        <button class="btn" onclick="openUpgradeModal('Refurbished PS2 Fat',150)">Add to Basket</button>
      </div>
    </div>

    <div class="product-card" data-base="185" data-name="Plug & Play Bundle">
      <img src="assets/Console_Bundle.jpg" alt="Plug & Play Bundle">
      <div class="name">Plug & Play Bundle</div>
      <div class="price">£185</div>
      <p>Console, controller, AV cables, curated games — ready to play instantly.</p>
      <div class="product-actions">
        <button class="btn" onclick="openUpgradeModal('Plug & Play Bundle',185)">Add to Basket</button>
      </div>
    </div>

    <div class="product-card" data-base="95" data-name="PS2 Tested Console">
      <img src="assets/PS2_CONSOLE_ONLY_FRONT_FLAT.png" alt="PS2 Tested Console">
      <div class="name">PS2 Tested Console</div>
      <div class="price">£95</div>
      <p>Tested console for reliable gaming or modding. Fully verified and ready to play.</p>
      <div class="product-actions">
        <button class="btn" onclick="openUpgradeModal('PS2 Tested Console',95)">Add to Basket</button>
      </div>
    </div>

    <div class="product-card" data-base="250" data-name="Modded Bundle (HDD)">
      <img src="assets/PS2_MODDED_REAR.jpg" alt="Modded PS2 Bundle with HDD">
      <div class="name">Modded Bundle (HDD)</div>
      <div class="price">£250</div>
      <p>Professionally modded PS2 bundle with HDD and homebrew support.</p>
      <div class="product-actions">
        <button class="btn" onclick="openUpgradeModal('Modded Bundle (HDD)',250)">Add to Basket</button>
      </div>
    </div>
  </div>
</section>

<!-- Upgrade Modal -->
<div id="upgradeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="upgradeTitle">
  <div class="modal-panel">
    <h3 id="upgradeTitle">Upgrade Options</h3>
    <p id="upgradeProduct">Select upgrades for: <strong></strong></p>
    <div class="upgrade-list">
      <div class="upgrade-item">
        <label>
          <input type="checkbox" name="upgrade" value="refurb" data-price="25">
          Refurbishment Package — +£25
        </label>
      </div>
      <div class="upgrade-item">
        <label>
          <input type="checkbox" name="upgrade" value="hdmi" data-price="18">
          HDMI Upgrade — +£18
        </label>
      </div>
      <div class="upgrade-item">
        <label>
          <input type="checkbox" name="upgrade" value="softmod" data-price="15">
          Softmod (FMCB) — +£15
        </label>
      </div>
      <div class="upgrade-item">
        <label>
          <input type="checkbox" name="upgrade" value="premium" data-price="55">
          Premium Bundle — +£55
        </label>
      </div>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>Total: £<span id="upgradeTotal">0</span></div>
      <div class="upgrade-actions">
        <button class="btn alt small" onclick="closeUpgradeModal()">Cancel</button>
        <button class="btn small" id="applyUpgradesBtn">Add to Basket</button>
      </div>
    </div>
  </div>
</div>

</div>

<script>
// Modal logic
let currentBasePrice = 0;
let currentProductName = '';

function openUpgradeModal(productName, basePrice){
  currentBasePrice = Number(basePrice);
  currentProductName = productName;
  document.getElementById('upgradeProduct').querySelector('strong').textContent = productName + ' — base £' + basePrice;
  document.querySelectorAll('#upgradeModal input[name="upgrade"]').forEach(ch => ch.checked = false);
  updateUpgradeTotal();
  document.getElementById('upgradeModal').classList.add('active');
}

function closeUpgradeModal(){
  document.getElementById('upgradeModal').classList.remove('active');
}

function updateUpgradeTotal(){
  const checked = Array.from(document.querySelectorAll('#upgradeModal input[name="upgrade"]:checked'));
  const add = checked.reduce((sum, el) => sum + Number(el.dataset.price || 0),0);
  const total = currentBasePrice + add;
  document.getElementById('upgradeTotal').textContent = total.toFixed(0);
}

document.addEventListener('change', function(e){
  if(e.target && e.target.name === 'upgrade'){
    updateUpgradeTotal();
  }
});

document.getElementById('applyUpgradesBtn').addEventListener('click', function(){
  const checked = Array.from(document.querySelectorAll('#upgradeModal input[name="upgrade"]:checked'));
  const upgrades = checked.map(ch => ({id: ch.value, price: ch.dataset.price}));
  const total = document.getElementById('upgradeTotal').textContent;
  closeUpgradeModal();
  // redirect to checkout page with query string
  const q = encodeURIComponent(JSON.stringify({product: currentProductName, base: currentBasePrice, upgrades}));
  window.location.href = `checkout.html?order=${q}`;
});

document.getElementById('upgradeModal').addEventListener('click', function(e){
  if(e.target === this) closeUpgradeModal();
});
</script>

</body>
</html>
