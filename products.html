<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Retro Replay — Products</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="assets/logo.png" type="image/x-icon">
<style>
:root{
  --bg:#181b23;
  --panel:#22262f;
  --muted:#e3e7ed;
  --accent:#6db8ff;
  --panel-2:#2a2f3a;
  --card-border:#1463ff;
}
html,body{height:100%}
body{
  font-family:'Orbitron',sans-serif;
  background:var(--bg);
  color:var(--muted);
  margin:0; padding:0;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.wrap{ max-width:1200px; margin:0 auto; padding:2rem; position:relative; z-index:1; }
header{
  display:flex; justify-content:space-between; align-items:center;
  flex-wrap: wrap; margin-bottom:2rem;
}
.logo{ height:120px; width:auto; z-index:2; }
nav{ display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; z-index:2; }
nav a{ color:var(--accent); text-decoration:none; font-weight:bold; transition:0.15s; }
nav a:hover, nav a.active{ text-decoration:underline; color:#8ec5ff; }
.section-title{ font-size:2rem; margin-bottom:1rem; color:var(--accent); text-align:center; }
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1.5rem;
  margin-bottom:2rem;
}
.product-card{
  background:var(--panel);
  padding:1rem;
  border-radius:8px;
  text-align:center;
  display:flex; flex-direction:column;
  border:1px solid rgba(255,255,255,0.02);
}
.product-card img{ max-width:100%; margin-bottom:0.5rem; border-radius:4px; }
.product-card .name{ font-weight:600; margin-bottom:0.3rem; color:var(--muted); }
.product-card .price{ font-size:1.2rem; font-weight:bold; margin-bottom:0.5rem; color:#fff; }
.product-card p{ font-size:0.95rem; line-height:1.4; color:#cbd3dd; }
.product-actions{
  margin-top:auto;
  display:flex;
  gap:8px;
  justify-content:center;
  align-items:center;
  padding-top:10px;
}
.btn{
  display:inline-block;
  background:var(--panel-2);
  color:var(--muted);
  padding:0.6rem 0.9rem;
  border-radius:8px;
  text-decoration:none;
  font-weight:bold;
  border:1px solid rgba(255,255,255,0.03);
  cursor:pointer;
}
.btn.alt{ background:transparent; color:var(--accent); border:1px solid rgba(109,184,255,0.14); }
.btn.small{ padding:0.4rem 0.6rem; font-size:0.95rem; }
.modal{
  position:fixed; left:0; top:0; right:0; bottom:0;
  background: rgba(0,0,0,0.6);
  display:none; align-items:center; justify-content:center; z-index:9999;
  padding:20px;
}
.modal.active{ display:flex; }
.modal-panel{
  width:100%; max-width:760px;
  background: linear-gradient(180deg, rgba(34,38,47,0.98), rgba(20,24,31,0.98));
  padding:20px;
  border-radius:10px;
  border:1px solid rgba(109,184,255,0.06);
}
.modal-panel h3{ color:var(--accent); margin-top:0; }
.upgrade-list{ display:flex; flex-direction:column; gap:10px; margin:10px 0 18px; }
.upgrade-item{ display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:8px; background: rgba(255,255,255,0.02); }
.upgrade-item label{ cursor:pointer; }
.upgrade-actions{ display:flex; gap:10px; justify-content:flex-end; }
</style>
</head>
<body>
<div class="wrap">
<header>
  <img src="assets/logo.png" alt="Retro Replay logo" class="logo">
  <nav aria-label="Main navigation">
    <a href="index.html">Home</a>
    <a href="products.html" class="active">Products</a>
    <a href="mods-upgrades.html">Mods & Upgrades</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<h2 class="section-title">Our Full Catalog</h2>

<section class="product-grid" aria-label="Products">
  <!-- Product List Start -->
  <div class="product-card" data-base="150" data-name="Refurbished PS2 Fat">
    <img src="assets/PS2_REFURBED_BUNDLE.jpg" alt="Refurbished PS2 Fat">
    <div class="name">Refurbished PS2 Fat</div>
    <div class="price">£150</div>
    <p>Fully refurbished PS2 Fat console, cleaned, tested, cosmetically restored.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="185" data-name="Plug & Play Bundle">
    <img src="assets/Console_Bundle.jpg" alt="Plug & Play Bundle">
    <div class="name">Plug & Play Bundle</div>
    <div class="price">£185</div>
    <p>Console, controller, AV cables, curated games — ready to play instantly.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="95" data-name="PS2 Tested Console">
    <img src="assets/PS2_CONSOLE_ONLY_FRONT_FLAT.png" alt="PS2 Tested Console">
    <div class="name">PS2 Tested Console</div>
    <div class="price">£95</div>
    <p>Tested console for reliable gaming or modding. Fully verified and ready to play.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="250" data-name="Modded Bundle (HDD)">
    <img src="assets/PS2_MODDED_REAR.jpg" alt="Modded PS2 Bundle with HDD">
    <div class="name">Modded Bundle (HDD)</div>
    <div class="price">£250</div>
    <p>Professionally modded PS2 bundle with HDD and homebrew support. Ready-to-go library included.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="135" data-name="Refurbished PS2 Slim">
    <img src="assets/PS2_SLIM.jpg" alt="Refurbished PS2 Slim">
    <div class="name">Refurbished PS2 Slim</div>
    <div class="price">£135</div>
    <p>Fully refurbished PS2 Slim console, tested and cleaned for optimal performance.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="200" data-name="Softmod Bundle">
    <img src="assets/PS2_SOFTMOD.jpg" alt="Softmod PS2 Bundle">
    <div class="name">Softmod Bundle</div>
    <div class="price">£200</div>
    <p>PS2 with Softmod installed, ready for homebrew and USB/HDD apps.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>

  <div class="product-card" data-base="300" data-name="Premium Bundle">
    <img src="assets/PS2_PREMIUM.jpg" alt="Premium PS2 Bundle">
    <div class="name">Premium Bundle</div>
    <div class="price">£300</div>
    <p>Refurb + HDMI + Softmod + empty 32GB USB for a complete setup.</p>
    <div class="product-actions">
      <button class="btn" onclick="openUpgradeModal(this)">Add to Basket / Choose Upgrades</button>
      <div class="paypal-container"></div>
    </div>
  </div>
  <!-- Product List End -->
</section>
</div>

<!-- Upgrade Modal -->
<div id="upgradeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="upgradeTitle">
  <div class="modal-panel" role="document">
    <h3 id="upgradeTitle">Upgrade Options</h3>
    <p id="upgradeProduct" style="color:#cfe8ff;margin-bottom:8px;">Select upgrades for: <strong></strong></p>
    <div class="upgrade-list">
      <div class="upgrade-item">
        <label><input type="checkbox" name="upgrade" value="refurb" data-price="25"><strong>Refurbishment</strong> — +£25</label>
      </div>
      <div class="upgrade-item">
        <label><input type="checkbox" name="upgrade" value="hdmi" data-price="18"><strong>HDMI Upgrade</strong> — +£18</label>
      </div>
      <div class="upgrade-item">
        <label><input type="checkbox" name="upgrade" value="softmod" data-price="15"><strong>Softmod (FMCB)</strong> — +£15</label>
      </div>
      <div class="upgrade-item">
        <label><input type="checkbox" name="upgrade" value="premium" data-price="55"><strong>Premium Bundle</strong> — +£55</label>
      </div>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div style="color:#cbd3dd;">Total: £<span id="upgradeTotal">0</span></div>
      <div class="upgrade-actions">
        <button class="btn small alt" onclick="closeUpgradeModal()">Cancel</button>
        <div id="paypalButtonContainer"></div>
      </div>
    </div>
  </div>
</div>

<script src="https://www.paypal.com/sdk/js?client-id=AYXmDuhylfxtnuRz3E2EzoyXNO0HnxJAXr_DQauHlsoawJjLKel8W17luzhp1_52OlIh9qjJYDggdf8o&currency=GBP"></script>
<script>
let currentBasePrice = 0;
let currentProductName = '';
let currentPayPalContainer = null;

function openUpgradeModal(btn){
  const card = btn.closest('.product-card');
  currentBasePrice = Number(card.dataset.base);
  currentProductName = card.dataset.name;
  currentPayPalContainer = card.querySelector('.paypal-container');

  document.getElementById('upgradeProduct').querySelector('strong').textContent = currentProductName + ' — base £' + currentBasePrice;
  document.querySelectorAll('#upgradeModal input[name="upgrade"]').forEach(ch=>ch.checked=false);
  updateUpgradeTotal();
  renderPayPalButton();
  document.getElementById('upgradeModal').classList.add('active');
}

function closeUpgradeModal(){ document.getElementById('upgradeModal').classList.remove('active'); }

function updateUpgradeTotal(){
  const checked = Array.from(document.querySelectorAll('#upgradeModal input[name="upgrade"]:checked'));
  const add = checked.reduce((sum, el)=>sum+Number(el.dataset.price||0),0);
  document.getElementById('upgradeTotal').textContent=(currentBasePrice+add).toFixed(0);
}

document.addEventListener('change', function(e){ if(e.target.name==='upgrade'){ updateUpgradeTotal(); renderPayPalButton(); } });
document.getElementById('upgradeModal').addEventListener('click', function(e){ if(e.target===this) closeUpgradeModal(); });

function renderPayPalButton(){
  const container = document.getElementById('paypalButtonContainer');
  container.innerHTML='';
  const total = Number(document.getElementById('upgradeTotal').textContent);
  paypal.Buttons({
    style:{layout:'vertical',color:'gold',shape:'rect',label:'buynow'},
    createOrder:(data,actions)=>actions.order.create({
      purchase_units:[{description:currentProductName, amount:{currency_code:'GBP', value:total}}]
    }),
    onApprove:(data,actions)=>actions.order.capture().then(()=>{ alert(`Thank you! ${currentProductName} purchased for £${total}`); closeUpgradeModal(); })
  }).render('#paypalButtonContainer');
}
</script>
</body>
</html>
